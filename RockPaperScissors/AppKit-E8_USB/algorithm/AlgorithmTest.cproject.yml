project:
  description: Record data or playback recorded data as algorithm input and record algorithm output data

  packs:
    - pack: ARM::CMSIS@^6.2.0
    - pack: ARM::CMSIS-RTX@^5.9.0
    - pack: ARM::CMSIS-NN@^7.0.0

  connections:
    - connect: SDS algorithm test demo
      provides:
        - CMSIS-RTOS2
      consumes:
        - SDS_REC_PLAY
        - CMSIS_VIO
        - STDIN
        - STDOUT
        - STDERR
        - Heap: 65536

  define:
    - OS_IDLE_THREAD_NAME: \"Idle\"
    - OS_TIMER_THREAD_NAME: \"Timer\"
    - ET_ARM_BAREMETAL_SCRATCH_TEMP_ALLOCATOR_POOL_SIZE: 0x100000
    - ET_ARM_BAREMETAL_METHOD_ALLOCATOR_POOL_SIZE: 0x100000
    - C10_USING_CUSTOM_GENERATED_MACROS
    - ET_NUM_INFERENCES: 1
    - ET_LOG_DUMP_OUTPUT
    - ET_DEBUG_BUFFER_SIZE: 0x8000 

  groups:
    - group: Documentation
      files:
        - file: ../README.md
    - group: Application
      files:
        - file: app_main.c
        - file: sds_control.c
        - file: sds_main.c
        - file: sds_algorithm_user.cpp
        - file: sds_algorithm_config.h
        - file: arm_memory_allocator.h
        - file: arm_memory_allocator.cc
        - file: arm_executor_runner.cc
        - file: arm_executor_runner.h
        - file: image_processing_func.c
        - file: image_processing_func.h
        - file: sds_data_in_user.c
          for-context:
            - .DebugRec
            - .ReleaseRec
        - file: sds_data_in_play.c
          for-context:
            - .DebugPlay
            - .ReleasePlay

  components:
    - component: CMSIS:OS Tick:SysTick
    - component: CMSIS:RTOS2:Keil RTX5&Source
    - component: CMSIS:NN Lib

  layers:
    - layer: $SDSIO-Layer$
      type:  SDSIO
    - layer: $Board-Layer$
      type:  Board
    - layer: $AI-Layer$
      type:  AI / Executorch
    - layer: $runtime1-Layer$
      type: AI / Executorch Stage 1 Source
    - layer: $runtime2-Layer$
      type: AI / Executorch Stage 2 Source

  # List of miscellaneous tool-specific controls
  misc:
  - for-compiler: GCC
    Link:
      - -Wl,--whole-archive
      - $SolutionDir()$/ai_layer/engine/lib/libexecutorch.a
      - $SolutionDir()$/ai_layer/engine/lib/libquantized_kernels.a
      - $SolutionDir()$/ai_layer/engine/lib/libquantized_ops_lib.a
      - $SolutionDir()$/ai_layer/engine/lib/libexecutorch_delegate_ethos_u.a
      - -Wl,--no-whole-archive
      - -Wl,-u,_printf_float

  output:
    type:
      - elf
      - hex
      - map
